<!DOCTYPE html>
<html><title>Old School Demo</title>
<script src=three.min.js.newest></script>
<script src=OBJLoader.js></script>
<script src=Ball.js></script>
<script src=InfiniteCanvas.js></script>
<script src=Random.js></script>
<!--
<canvas width=1600 height=900 id=c>
-->
<body></body>
<script>

    (function(){

        var camera, scene, renderer;
        var geometry, material, cube;
        var dumpster;

        function init() {
            renderer = new THREE.WebGLRenderer({
                antialias: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);
            camera.position.z = 500;

            scene = new THREE.Scene();

            geometry = new THREE.CubeGeometry(100, 100, 100);
            material = new THREE.MeshLambertMaterial({
                color: 0xff0000
            });

            cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

            var light = new THREE.PointLight(0xffffff);
            light.position = new THREE.Vector3(0,100,400);
            scene.add(light);
            var ambient = new THREE.AmbientLight(0x111111);
            scene.add(ambient);

            var loader = new THREE.JSONLoader();
            loader.load("res/dumpster_scene.js",
                    function(geometry, materials) {
                console.log('loaded', geometry, materials);
                var mesh = new THREE.Mesh(geometry,
                    new THREE.MeshFaceMaterial(materials));
                scene.add(mesh);
            });
        }

        function animate() {
            requestAnimationFrame(animate);

            t = Date.now()/1000;

            camera.position.z = Math.sin(t)*500;
            camera.position.x = Math.cos(t)*500;
            camera.position.y = 400;

            camera.lookAt(cube.position);

            renderer.render(scene, camera);
        }

        init();
        animate();
    })();
    /*
    (function(){
        GU = 100;
        t = 0;

        Math.random = Random();

        var ctx = c.getContext('2d');

        var balls = new BallPool();

        var infiniteCanvas = new InfiniteCanvas();

        var leaderBall = new Ball();
        leaderBall.x = 0;
        leaderBall.y = 4.5;
        leaderBall.direction = 0.5 * 3.141592;
        leaderBall.thickness = 100;

        for(var i=0;i<100;i++){
            balls.addBall(leaderBall.x, leaderBall.y);
        }

        var scale = 1.5;

        setInterval(function(){
            t += 1;
            scale *= 0.9995;
            if(t % 100 == 0){
                balls.addBall(leaderBall.x, leaderBall.y, leaderBall.direction);
                balls.addBall(leaderBall.x, leaderBall.y, leaderBall.direction);
                balls.addBall(leaderBall.x, leaderBall.y, leaderBall.direction);
                balls.addBall(leaderBall.x, leaderBall.y, leaderBall.direction);
                balls.addBall(leaderBall.x, leaderBall.y, leaderBall.direction);
                balls.addBall(leaderBall.x, leaderBall.y, leaderBall.direction);
            }
            leaderBall.update();
            leaderBall.directiondt *= 0.9;
            leaderBall.render(infiniteCanvas);
            balls.update();
            balls.render(infiniteCanvas);
            ctx.clearRect(0, 0, c.width, c.height);
            infiniteCanvas.render(ctx, -(leaderBall.x - 8), -(leaderBall.y - 4.5), scale);
        }, 10);

    })();
    */
</script>
<style>
    *{
        margin: 0 auto;
        padding: 0 auto;
    }
</style>
